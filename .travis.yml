language: java
jdk:
- openjdk11
sudo: false
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
install: skip
test: skip
jobs:
  include:
  - stage: build pull request
    script: "./gradlew check jacocoTestReport"
    if: type = pull_request
  - stage: build master
    script: "./gradlew check jacocoTestReport publish"
    if: branch = master AND NOT type = pull_request
  - stage: build and stage release
    if: branch =~ /release/
    script: "./gradlew check publish -Pversion=${TRAVIS_BRANCH#'release/'}"
  - stage: release
    if: branch =~ /release/
    script: "./gradlew closeAndReleaseRepository"
  - stage: github release
    if: branch =~ /release/
    script: "./gradlew check -Pversion=${TRAVIS_BRANCH#'release/'} && ./scripts/github-release.sh"
after_success:
- bash <(curl -s https://codecov.io/bash)
before_install:
- |
  if [[ "$TRAVIS_PULL_REQUEST" = "false" ]]; then
    openssl aes-256-cbc -K $encrypted_661235106ac6_key -iv $encrypted_661235106ac6_iv -in web3j.asc.enc -out web3j.asc -d
  fi
env:
  global:
  - secure: qyYHb3/ckzWi612XBIW7iOV+017bvc1fjLR6TCxcv3rmolihjpD6lMYvfmq5p8pzy4GVY4Fqy1QWIMZEvB5E6zEtREAz49w0nuKQczrHFLnVMz8WhBB9wujWx6LI3LJR8/Gq2Q/QfJxwn9gacWRDpgqW1AnSKGYdfeoB+NqMg7jGKSacNiiiulJEqfDXCCuJn9uLFkgF7NYARoGq752KW4XARnZwsrkziIl0dvNyyBcIuro+c9oMF5o2zHVNKQ7RlElmdlgE2UC+nNAyp3O7ND9yAIpMKsfitA98ttF34EoKiBx05O6RaYidYsAMjqGBGr4ZnrAVtWJXvRGqIrecedLvXyjS9X7MtJJWn8PS6rgdxYW0B8x0la+NW1VFHW6nJ8NVbT4c+H3JhiJuPACdBf9vAcgVJ2MTYLVnwGA2w2UlHG50pLezZSDP43Fef+uVi2GjieGrbA7EfjM8OXduJehcJVYxhzY88mNswmoUxV0vcAxWQTB1knpzRu2f++uZES/FKrZ26Je/tANoUS1VsAx1qzCVDRpxM/7tRAXJ338Q1DIWYhAVYBjhTOB0xfnQxql95HUzNm9jqXmG39EzXs2GlLKtQSjuapACh7RonUtpnzI2nwlWCEV1Z8/y1zUiwfZNRugXlxFth5qinknIduDunqC2ljtntod5n/2IlUU=
  - secure: p2tQc+1Q+keJRWMUBTSTsTXbxYCz/xQeRPGHvvjDGXQmWDZhsKGvehD84ttebU/SiE3YGBiYeiVO4l4KNxAka5OxfWd2AHM2ELBJYnjcX1QSuhLWScm48496RFNE1IZfAG9aiR0yyVAV5UtjR8gClpyEXLtCrP52Zu6MryPvJEUHFnzWEoaFE3P8Huktdw4HRPt1rRdH0RV4MuGMaNNVyfH8EUMVpC8HziYXxKeysdmt3Dzep16VVYxovySdkE6ELk2Zew3IVbTZowXngmWh544KVUcEK1RaWMacURQC1UQhCvOkg+zYMzvvhToZ7soKn2zehueTxt0faz5u17/NMu6MJmvL7iEDLhmxvp4dPZ3d6z37KQweB5kxH0WMP4xe/2VbeK+lTWEdZakmzGoWXw1zyyUQc6ZIIRvFKd5UCOStVUBTu0QMcj0rWj67WMZVwyIqyl9wtY2FUMm2aBzE+/ezP4sWUQSIOK633sLAr8xAFYVsb9km5YVMGnEEgJdJrtQ/72XqW/6gaZVGWQSSOIj7QDfwya1W1v3jRETN6Uda8xBGisBW+aOXfqEeexoJTh08jQOlZcbwiFJxKXjNwEUPmPrznYriJYc5iS9Qj+gxlb2p5SMJNa5gZu3E/zJBpXyNYBdWyFX5ONTX8w0YKg6qHJoDNCla4yXNjiMDQ0Q=
  - secure: mawwYdgwL6uWKeODUGBo4GemERrDbMZKu2TNY1t6ovvZ94XrhMVihnO1yL62Rrpshv+5vamXgzoNMdUr4nBFTGOrbUWFNo0C5GLmN+1qfmiEIvG5S8+wfJvjaapdm4CbyPHJtjH7CS3ywQcS+lCWWQWu2L1UEOmlTgeHvmlSuW+ObXyK+5gG8Dt9uRG7znJ8hRg6Do4yF0c6BA3gpiUKDafI7rSpIcS4PKRzl0a7uZX28EHnasjUirsOa0V6ps+73qoRZaV722/cXQhTtyMvWXlUCzgWxCq4xBVaNpkbaC7EWA8h1Yv8dHMKbwJUP8DMbW2QlV1RaQnsMJo+OCM8/IPEHvD83LyAyrROTcqswZCWcFfyszZiIF+/zYG2dHkVz5BTuMV7iSfDJfPCHh5K8lrqORuu254po45v+Bqg4G0+/85FxvAfeXt0Bf08vwu+XTpiw+ux25k5qJxMEjN6lQx1lCJwnI+2imqSVVFt+FEL2ZTqpTaLo1dwHcfzsHXxyAYRmLsQAv4YOMyoghEV0fFSsDmCMn81xGhNDkbN0rYQxDwazUmKMst7hWVTKzOcsx7NygcPJDfKoCTUz0wG5ClQ8/SQgPllInkhnSaSEtlQdPaTxBW1Yd1dnq3oV5e7JpTZ5lv68eVUSr2hwVNCAov00IBtXWDtBN4C3eZ73ho=
  - secure: cR0uoEy7EJu8Ivu3vquN+Nh8jWs5tma7HmJ2vv1sr2h4C+Ua+2euTDXWAl4FUDStRYkRgnCf9wwsiXjGoPEd4KhWSzqaPI41rDUs0PEeAFW7cYm/g5dEQWHgelQn3Yep8WFYpebDC98xVIwvWaay1jaWuT5pRWS3TtlBXRP1yGQHMEH/90mSjTZTY0mMl/z+8r4IZVCLqAMnFnkPHCF8SBWh/dU3brjbjnsvfgPASn7I7gHaGrV7FgBxHpb2qG9hPfS0c+LFHOvXY5fZ7iAtQP9wWecWsIkIsFnsbRr09Of2nXU+Ge5XZMl2mPkUXjW1zmYJtlUfzfbXNELM9zjMoKCacsPqwlqWi+063joN2DUT9Fu3tRRMvdwdVPBhXEUbqS4gHbBlRr83COEjxzpcKxJkn1MeOI8S/+4/C5H6s4cpbDiziWYMRjtGcZCh65jD3YTRTHMLV+fKtd0ZOB/te5xCoCSoe9jGn8fryXmWdUBiUkIX6siUp+UPg8BCiKmW6CscIT9YBFSSuy+UkoPLwonRnrX1UZKt0Hw4sP6N9BWke6HBh8iTg5zJVuAV7ZcdwjfhNbccwyCKDK1S+Vmgm7lbMn1XQWbfPKeIT/pjB4ZhYVEYaT244Ml6ZaSQqHqFNg6sjDRUgTDorJ2Ju81YAsXFW6qVUUY7tcC553MD020=
